essai <- RMSD(plop,vc.CM)
essai
essai <- data.table(x=0.25,y=20,essai)
essai
weight.dist.ana(essai,vc.CM,1)
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
weights.CM <- rbindlist(lapply(1:n,function(x){rms <- xy.rmsd[x,vc.CM,with=F] ; rms <- exp(-rms^2/A) ; rms <- rms/sum(rms) ; return(rms)}))
return(weights.CM)
}
weight.dist.ana(essai,vc.CM,1)
weight.dist.ana(essai,vc.CM,5)
weight.dist.ana(essai,vc.CM,0.02)
weight.dist.ana(essai,vc.CM,0.01)
weight.dist.ana(essai,vc.CM,0.1)
weight.dist.ana(essai,vc.CM,0.5)
weight.dist.ana(essai,vc.CM,0.8)
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(x){rms <- xy.rmsd[x,vc.CM,with=F] ; rms <- exp(-rms^2/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; return(rms)}))
return(weights.CM)
}
weight.dist.ana(essai,vc.CM,0.8)
weight.dist.ana(essai,vc.CM,50)
essai
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- xy.rmsd[xx,vc.CM,with=F] ; rms <- exp(-rms^2/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; return(data.table(xy.rmsd[xx,-vc.CM,with=F],rms))}))
return(weights.CM)
}
weight.dist.ana(essai,vc.CM,50)
essai
weight.dist.ana(essai,vc.CM,0.1)
weight.dist.ana(essai,vc.CM,0.5)
weight.dist.ana(essai,vc.CM,10)
weight.dist.ana(essai,vc.CM,100)
weight.dist.ana(essai,vc.CM,1000)
plop <- as.data.table(data.frame(OBS=c(1,4,2,5),SIM1=c(4,7,8,98),SIM2=c(7,8,9,4),SIM3=c(45,7,9,7)))
plop
vc.CM
RMSD <- function(dt.obs.CM,vc.CM)
{
# dt.obs.CM : data table CM and OBS outputs, with extra column of variable and month and year
# vc.CM : name of the CMs
N.CM <- length(vc.CM)
mat.obs <- dt.obs.CM2[,!vc.CM,with=F]
mat.CM <- dt.obs.CM2[,vc.CM,with=F]
if(ncol(mat.obs) != 1)
{
stop('More than 1 vector of observations in RMSD')
}
# change into matrix
mat.obs <- as.matrix(mat.obs)
mat.CM <- as.matrix(mat.CM)
value.rmsd <- lapply(1:length(mat.CM[1,]),function(x){return(sqrt((1/length(mat.obs))*sum((mat.CM[,x]-mat.obs)^2)))})
setDT(value.rmsd)
colnames(value.rmsd) <- vc.CM
return(value.rmsd)
}
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- xy.rmsd[xx,vc.CM,with=F] ; rms <- exp(-rms^2/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; return(data.table(xy.rmsd[xx,-vc.CM,with=F],rms))}))
return(weights.CM)
}
essai <- RMSD(plop,vc.CM)
RMSD <- function(dt.obs.CM,vc.CM)
{
# dt.obs.CM : data table CM and OBS outputs, with extra column of variable and month and year
# vc.CM : name of the CMs
N.CM <- length(vc.CM)
mat.obs <- dt.obs.CM[,!vc.CM,with=F]
mat.CM <- dt.obs.CM[,vc.CM,with=F]
if(ncol(mat.obs) != 1)
{
stop('More than 1 vector of observations in RMSD')
}
# change into matrix
mat.obs <- as.matrix(mat.obs)
mat.CM <- as.matrix(mat.CM)
value.rmsd <- lapply(1:length(mat.CM[1,]),function(x){return(sqrt((1/length(mat.obs))*sum((mat.CM[,x]-mat.obs)^2)))})
setDT(value.rmsd)
colnames(value.rmsd) <- vc.CM
return(value.rmsd)
}
essai <- RMSD(plop,vc.CM)
essai
essai <- data.table(x=0.25,y=12,essai)
weight.dist.ana(essai,vc.CM,1000)
weight.dist.ana(essai,vc.CM,100)
weight.dist.ana(essai,vc.CM,50)
weight.dist.ana(essai,vc.CM,10000)
weight.dist.ana(essai,vc.CM,100000)
weight.dist.ana(essai,vc.CM,1000000)
99-51+1
source("~/Science/FINRES/workfromhome_20220209/weights.grid_DISTANCE_v1.R")
RMSD
source("~/Science/FINRES/workfromhome_20220209/weights.grid_DISTANCE_v1.R")
rmsd.all
mean(rmsd.All[,3])
mean(rmsd.all[,3])
mean(rmsd.all[,3,with=F])
mean(unlist(rmsd.all[,3]))
mean(unlist(rmsd.all[,4]))
mean(unlist(rmsd.all[,5]))
mean(unlist(rmsd.all[,6]))
min(unlist(rmsd.all[,3]))
max(unlist(rmsd.all[,3]))
min(unlist(rmsd.all[,4]))
max(unlist(rmsd.all[,4]))
min(unlist(rmsd.all[,5]))
max(unlist(rmsd.all[,5]))
7/30
7/32
test <- weight.dist.ana(rmsd.all,vc.CM,A=100000)
test
test <- weight.dist.ana(rmsd.all,vc.CM,A=1000000)
test <- weight.dist.ana(rmsd.all,vc.CM,A=10000)
test
max(unlist(test[,3]))
test <- weight.dist.ana(rmsd.all,vc.CM,A=100000)
max(unlist(test[,3]))
max(unlist(test[,4]))
max(unlist(test[,5]))
max(unlist(test[,6]))
min(unlist(test[,6]))
min(unlist(test[,4]))
min(unlist(test[,5]))
test <- weight.dist.ana(rmsd.all,vc.CM,A=1000000)
min(unlist(test[,5]))
max(unlist(test[,6]))
test <- weight.dist.ana(rmsd.all,vc.CM,A=10)
max(unlist(test[,6]))
test
test <- weight.dist.ana(rmsd.all,vc.CM,A=100)
max(unlist(test[,6]))
min(unlist(test[,6]))
test
test <- weight.dist.ana(rmsd.all,vc.CM,A=50)
min(unlist(test[,6]))
exp(-250)
exp(-2500)
exp(-25000)
source("~/Science/FINRES/workfromhome_20220209/weights.grid_DISTANCE_v1.R")
test <- weight.dist.ana(rmsd.all,vc.CM,A=50)
min(unlist(test[,6]))
test
rmsd.all
exp(-(36.10632^2)/A)
A <- 50
exp(-(36.10632^2)/A)
source("~/Science/FINRES/workfromhome_20220209/weights.grid_DISTANCE_v2.R")
test <- weight.dist.ana(rmsd.all,vc.CM,A=50)
test
source("~/Science/FINRES/workfromhome_20220209/weights.grid_DISTANCE_v2.R")
test <- weight.dist.ana(rmsd.all,vc.CM,A=50)
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms <- exp(-(rms^2)/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; rms <- data.table(x=xy.rmsd[xx,1],y=xy.rmsd[xx,2],rms) ; print(rms) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=50)
plop <- data.table(a=1,b=2,d=5)
plop
unlist(plop)
as.data.table(unlist(plop))
help(as.data.table)
as.data.frame(unlist(plop))
as.matrix(unlist(plop))
as.matrix(unlist(plop),nrow=1)
as.matrix(unlist(plop),nrow=1,ncol=3)
unlist(plop)
plop
as.array(unlist(plop))
as.data.table(as.array(unlist(plop)))
data.table(as.array(unlist(plop)))
list(unlist(plop))
as.data.table(list(unlist(plop)))
as.data.table(t(unlist(plop)))
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms <- exp(-(rms^2)/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; rms <- data.table(x=xy.rmsd[xx,1],y=xy.rmsd[xx,2],t(rms)) ; print(rms) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=50)
test <- weight.dist.ana(rmsd.all,vc.CM,A=10)
test <- weight.dist.ana(rmsd.all,vc.CM,A=10)
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms <- exp(-(rms^2)/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; rms <- data.table(xy.rmsd[xx,-vc.CM],t(rms)) ; print(rms) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
vc.CM
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms <- exp(-(rms^2)/A) ; rms <- round(rms/sum(rms),digits=n.digits) ; rms <- data.table(xy.rmsd[xx,-vc.CM,with=F],t(rms)) ; print(rms) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
rmsd.all
rms <- 36.10
A <- 1
exp(-(rms^2)/A)
round(0.000012,digits=4)
unlist(xy.rmsd[xx,vc.CM,with=F])
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms.e <- exp(-(rms^2)/A) ; rms.sum <- sum(rms.e) ; if(rms.sum > 10^(-6)){rms <- round(rms.e/rms.sum,digits=n.digits)}else{ read.min <- which.min(rms) ; rms[read.min] <- 1 ; rms[!read.min] <- 0} ; rms <- data.table(xy.rmsd[xx,-vc.CM,with=F],t(rms)) ; print(rms) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
rmsd.all
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms.e <- exp(-(rms^2)/A) ; rms.sum <- sum(rms.e) ; if(rms.sum > 10^(-6)){rms <- round(rms.e/rms.sum,digits=n.digits)}else{ read.min <- which.min(rms) ; rms[read.min] <- 1 ; rms[!read.min] <- 0} ; rms <- data.table(xy.rmsd[xx,-vc.CM,with=F],t(rms)) ; print(read.min) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms.e <- exp(-(rms^2)/A) ; rms.sum <- sum(rms.e) ; if(rms.sum > 10^(-6)){rms <- round(rms.e/rms.sum,digits=n.digits)}else{ read.min <- which.min(rms) ; rms[read.min] <- -1 ; rms[rms > 0] <- 0 ;  rms[rms < 0] <- 1 } ; rms <- data.table(xy.rmsd[xx,-vc.CM,with=F],t(rms)) ; print(rms) ;  scan() ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
rmsd.all
weight.dist.ana <- function(xy.rmsd,vc.CM,A)
{
n <- nrow(xy.rmsd)
n.digits <- round(log(length(vc.CM)),digits=0)+2
weights.CM <- rbindlist(lapply(1:n,function(xx){rms <- unlist(xy.rmsd[xx,vc.CM,with=F]) ; rms.e <- exp(-(rms^2)/A) ; rms.sum <- sum(rms.e) ; if(rms.sum > 10^(-6)){rms <- round(rms.e/rms.sum,digits=n.digits)}else{ read.min <- which.min(rms) ; rms[read.min] <- -1 ; rms[rms > 0] <- 0 ;  rms[rms < 0] <- 1 } ; rms <- data.table(xy.rmsd[xx,-vc.CM,with=F],t(rms)) ; return(rms)}))
return(weights.CM)
}
test <- weight.dist.ana(rmsd.all,vc.CM,A=1)
test
max(unlist(test[,3]))
min(unlist(test[,3]))
test <- weight.dist.ana(rmsd.all,vc.CM,A=5)
test
test <- weight.dist.ana(rmsd.all,vc.CM,A=10)
test
test <- weight.dist.ana(rmsd.all,vc.CM,A=30)
test
test <- weight.dist.ana(rmsd.all,vc.CM,A=100)
test
rmsd.all
exp(-0.2)
exp(-1)
exp(0)
1+0.38+0.37+0.36
1/2.11
exp(-15)
exp(-12)
exp(-5)
exp(-1/0.1)
exp(-1/0.01)
exp(-1/0.5)
exp(-1/0.4)
exp(-1/0.3)
exp(-1/0.2)
exp(-1/0.1)
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
plpp <- c(1,2,3)
as.vector(plpp)
z <- as.vector(plpp)
colnames(z)
colnames(z) <- c('4s','ds','ds')
z <- as.array(plpp)
colnames(z) <- c('4s','ds','ds')
z <- as.matrix(plpp,ncol=3)
colnames(z) <- c('4s','ds','ds')
z
z <- as.matrix(plpp,ncol=3,row=1)
colnames(z) <- c('4s','ds','ds')
z
z <- as.data.table(as.matrix(plpp,ncol=3,row=1))
z
as.data.table(t(c(1,2,3)))
z <- as.data.table(t(c(1,2,3)))
colnames(z) <- c('4','ds',"e")
z
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
c(1,2,100)
1+2+100
c(1,2,100)/103
c(1,2,100)*c(1,2,100)/103
c(1,2,100)/103
c(1,2,100)/103 %*% c(1,2,100)
sum(c(1,2,100)/103 %*% c(1,2,100))
c(1,2,100)/103
c(1,2,100) %*% c(1,2,100)/103
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220209/weight.reg.num_v2.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
w.aristo
plop <- as.matrix(A=c(1,1,1),B=c(2,2,2),ncol=2,now=3)
plop <- matrix(A=c(1,1,1),B=c(2,2,2),ncol=2,now=3)
plop <- matrix(A=c(1,1,1),B=c(2,2,2),ncol=2)
plop <- matrix(A=c(1,1,1),B=c(2,2,2))
help(matrix)
plop <- as.matrix(data.frame(A=c(1,1,1),B=c(2,2,2)))
colMeans(plop)
plop-colMeans(plop)
plop[]-colMeans(plop[])[col(plop[])]
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
w.aristo
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
w.aristo
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
w.aristo
hist(w.aristo[,3])
hist(unlist(w.aristo[,3]))
hist(unlist(w.aristo[,4]))
hist(unlist(w.aristo[,5]))
hist(unlist(w.aristo[,6]))
hist(unlist(w.aristo[,7]))
hist(unlist(w.aristo[,8]))
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
hist(unlist(w.aristo[,3]))
hist(unlist(w.aristo[,4]))
hist(unlist(w.aristo[,5]))
hist(unlist(w.aristo[,6]))
hist(unlist(w.aristo[,7]))
hist(unlist(w.aristo[,8]))
1/0.001
1/0.01
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
w.aristo
hist(unlist(w.aristo[,3]))
hist(unlist(w.aristo[,4]))
hist(unlist(w.aristo[,5]))
hist(unlist(w.aristo[,6]))
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
hist(unlist(w.aristo[,3]))
hist(unlist(w.aristo[,4]))
hist(unlist(w.aristo[,5]))
hist(unlist(w.aristo[,6]))
hist(unlist(w.aristo[,7]))
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
hist(unlist(w.aristo[,3]))
hist(unlist(w.aristo[,4]))
hist(unlist(w.aristo[,5]))
hist(unlist(w.aristo[,6]))
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.functions.R")
source("~/Science/FINRES/workfromhome_20220216/WEIGHT.project_v20220217/WEIGHT.split.historic.and.compare.R")
hist(unlist(w.aristo[,3]))
hist(unlist(w.aristo[,4]))
hist(unlist(w.aristo[,5]))
hist(unlist(w.aristo[,6]))
hist(unlist(w.aristo[,7]))
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v23.R")
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v24.R")
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v24.R")
data0.raw
class(data0.raw)
tsoutliers(data0.raw[,2])
library(forecast)
tsoutliers(data0.raw[,2])
tsoutliers(unlist(data0.raw[,2]))
unlist(data0.raw[,2])
plot(unlist(data0.raw[,2]))
plot(unlist(data0.raw[,2]),type='l')
as.numeric(unlist(data0.raw[,2]))plop <-
plop <-  as.numeric(unlist(data0.raw[,2]))
class(plop)
plot(plop)
plop
sum(is.na(plop))
plop
data.temperature
plot(data.temperature[,2])
plot(temperature.aggreg0[,2])
temperature.aggreg0
sum(!is.na(temperature.aggreg0[,outliers]))
sum(!is.na(temperature.aggreg0[,'outliers']))
data0 <- temperature.aggreg0
d.temp <- data0[,2]
d.temp
d.temp[!is.na(data0[,'outliers'])] <- data0[!is.na(data0[,'outliers']),'outliers']
plot(d.temp)
plot(d.temp,type='l')
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v24.R")
data0 <- temperature.aggreg0
d.temp <- data0[,2]
d.temp[!is.na(data0[,'outliers'])] <- data0[!is.na(data0[,'outliers']),'outliers']
d.temp <- as.numeric(d.temp)
ts.outliers(d.temp)
library(forecast)
ts.outliers(d.temp)
tsoutliers(d.temp)
plot(d.temp)
index.flagged <- tsoutliers(as.numeric(d.temp))$index
index.not.flagged <- setdiff(index0,index.flagged)
index.not.flagged
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v24.R")
tsoutliers(as.numeric(d.temp))
tsoutliers(as.numeric(d.temp))
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v24.R")
library(pracma)
help(hampel)
hampel(d.temp)
hampel(d.temp,k=5)
help(tsoutliers)
source("~/Science/ctbi2/hess-2021-609-main_v1.0.0/PartII.aggregation/step2_contamination.of.datasets/step1_main_v24.R")
